# README

## Get started

You need docker installed on your system. Run `docker compose up` to boot the application.
Docker compose is used to mount current dir to `/app` in the container, so that state is
preserved between reboots.

    git clone git@github.com:muxcmux/florio-challenge.git challenge

### Migrate the database

    docker exec -it challenge-app-1 bundle exec rails db:migrate

`challenge-app-1` is the name automatically given by docker compose. If you have cloned in
a different dir, then change this accordingly

## Usage

This is Rails API-only app. It runs on port 3000. Open your favourite networking client to
interact with it. Interactive API documentation is available on http://localhost:3000/api-docs

The available endpoints are:

* `POST /api/v1/patients.json` - creates a new patient
* `POST /api/v1/injections.json` - create a new injection record
* `GET /api/v1/injections.json` - view injection records
* `GET /api/v1/patients/adherence_score.json` - get the adherence score for a patient

(more info and usage on http://localhost:3000/api-docs - autogenerated from request specs)

### Metrics
Yabeda is configured to collect basic rails metrics: # of reqs, req duration, db query and
view rendering time, etc. By default it runs a prometheus exporter on port 9394, but this
is disabled by default. To enable it, open `compose.yml` and uncomment 9394 port forwarding

